# ====================================
# AI Playground - Backend Configuration
# Environment: Production (EXAMPLE FILE)
# ====================================
# 
# IMPORTANT: This is an example file with placeholders.
# Copy this to .env.production and fill in your actual values.
# NEVER commit .env.production to version control!
#
# ====================================

# -------------------- Database --------------------
# NeonDB Connection String
# Get from: https://console.neon.tech → Your Project → Connection Details
DATABASE_URL=postgresql://username:password@ep-xxx-xxx.region.aws.neon.tech/dbname?sslmode=require

DB_POOL_SIZE=20
DB_MAX_OVERFLOW=30
DB_POOL_RECYCLE=3600

# -------------------- Redis --------------------
# Upstash Redis URL
# Get from: https://console.upstash.com → Your Database → REST API
REDIS_URL=rediss://default:your-redis-password@your-redis-host.upstash.io:6379

REDIS_MAX_CONNECTIONS=50

# -------------------- API Configuration --------------------
API_V1_PREFIX=/api/v1

# CORS: Replace with your actual Vercel frontend URL
CORS_ORIGINS=https://your-app.vercel.app,http://localhost:5173

# Allowed hosts
ALLOWED_HOSTS=your-app.vercel.app

# -------------------- Security --------------------
# CRITICAL: Generate strong secret keys
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(64))"
SECRET_KEY=your-secret-key-here-minimum-64-characters
JWT_SECRET=your-jwt-secret-here-minimum-64-characters

ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=15
REFRESH_TOKEN_EXPIRE_DAYS=30

# -------------------- File Storage --------------------
UPLOAD_DIR=/var/app/uploads
MAX_UPLOAD_SIZE=524288000
ALLOWED_EXTENSIONS=.csv,.xlsx,.xls,.json

# -------------------- Celery (Optional - Not used on free tier) --------------------
CELERY_BROKER_URL=redis://default:your-redis-password@your-redis-host.upstash.io:6379/0
CELERY_RESULT_BACKEND=redis://default:your-redis-password@your-redis-host.upstash.io:6379/0
CELERY_WORKER_CONCURRENCY=8
CELERY_TASK_TIME_LIMIT=3600

# -------------------- Email (Optional) --------------------
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-specific-password
SMTP_TLS=True
EMAIL_FROM=your-email@gmail.com

# -------------------- Logging --------------------
LOG_LEVEL=INFO
LOG_FILE=/var/log/ai-playground/app.log

# -------------------- Application --------------------
ENVIRONMENT=production
DEBUG=false
APP_NAME=AI Playground
APP_VERSION=1.0.0
RATE_LIMIT_PER_MINUTE=60

# -------------------- Monitoring (Optional) --------------------
# Sentry for error tracking
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
# SENTRY_ENVIRONMENT=production
# SENTRY_TRACES_SAMPLE_RATE=0.1

# Prometheus metrics
ENABLE_METRICS=True
METRICS_PORT=9090

# -------------------- Feature Flags --------------------
ENABLE_WEBSOCKETS=True
USE_CELERY=false
USE_BACKGROUND_TASKS=true
ENABLE_EMAIL=false
ENABLE_CACHING=True
ENABLE_RATE_LIMITING=True

# -------------------- AWS S3 (Optional - if not using R2) --------------------
# AWS_ACCESS_KEY_ID=your-aws-access-key
# AWS_SECRET_ACCESS_KEY=your-aws-secret-key
# AWS_REGION=us-east-1
# S3_BUCKET=ai-playground-uploads-prod

# -------------------- Security Headers --------------------
SECURE_SSL_REDIRECT=True
SESSION_COOKIE_SECURE=True
CSRF_COOKIE_SECURE=True

# ===== CLOUDFLARE R2 =====
# Get from: https://dash.cloudflare.com → R2 → Manage R2 API Tokens
R2_ACCOUNT_ID=your-cloudflare-account-id
R2_ACCESS_KEY_ID=your-r2-access-key-id
R2_SECRET_ACCESS_KEY=your-r2-secret-access-key
R2_BUCKET_NAME=aiplayground-storage
R2_PUBLIC_URL=https://pub-xxxxx.r2.dev

# ===== FREE TIER LIMITS =====
MAX_UPLOAD_SIZE_MB=10
MAX_DATASET_ROWS=10000
MAX_TRAINING_TIME_SECONDS=60
MAX_CONCURRENT_JOBS=2

# ===== FEATURE FLAGS =====
ENABLE_HEAVY_MODELS=false
ENABLE_HYPERPARAMETER_TUNING=false
ENABLE_DEEP_LEARNING=false
ENABLE_AUTO_ML=false

# Available models (lightweight only for free tier)
AVAILABLE_MODELS=logistic_regression,linear_regression,ridge,lasso,decision_tree,random_forest,svm,knn
