# ====================================
# Docker Build Configuration
# ====================================
# This file defines build configurations for all services
# Used by build scripts and CI/CD pipelines

# Project Configuration
PROJECT_NAME=ai-playground
PROJECT_VERSION=1.0.0

# Registry Configuration
DOCKER_REGISTRY=docker.io
DOCKER_USERNAME=your-username
DOCKER_ORGANIZATION=your-org

# Backend Configuration
BACKEND_IMAGE_NAME=${DOCKER_REGISTRY}/${DOCKER_ORGANIZATION}/${PROJECT_NAME}-backend
BACKEND_PROD_DOCKERFILE=backend/Dockerfile
BACKEND_DEV_DOCKERFILE=backend/Dockerfile.dev
BACKEND_BUILD_CONTEXT=./backend
BACKEND_REQUIREMENTS_PROD=requirements.render.txt
BACKEND_REQUIREMENTS_DEV=requirements.txt

# Frontend Configuration
FRONTEND_IMAGE_NAME=${DOCKER_REGISTRY}/${DOCKER_ORGANIZATION}/${PROJECT_NAME}-frontend
FRONTEND_DOCKERFILE=frontend/Dockerfile
FRONTEND_BUILD_CONTEXT=./frontend
VITE_API_URL=http://localhost:8000
VITE_WS_URL=ws://localhost:8000/ws

# Build Configuration
DEFAULT_PLATFORM=linux/amd64
MULTI_PLATFORM=linux/amd64,linux/arm64
CACHE_FROM_LATEST=true
PUSH_LATEST_TAG=true

# Build Tags
# Supports: latest, version (1.0.0), commit hash, branch name
DEFAULT_TAGS=latest,${PROJECT_VERSION}

# Build Arguments
BUILD_ARGS_BACKEND="REQUIREMENTS_FILE=${BACKEND_REQUIREMENTS_PROD}"
BUILD_ARGS_FRONTEND="VITE_API_URL=${VITE_API_URL},VITE_WS_URL=${VITE_WS_URL}"

# Health Check Configuration
HEALTHCHECK_INTERVAL=30s
HEALTHCHECK_TIMEOUT=10s
HEALTHCHECK_RETRIES=3
HEALTHCHECK_START_PERIOD=40s

# Resource Limits (for docker-compose)
BACKEND_CPU_LIMIT=2
BACKEND_MEM_LIMIT=2g
FRONTEND_CPU_LIMIT=1
FRONTEND_MEM_LIMIT=512m
REDIS_CPU_LIMIT=1
REDIS_MEM_LIMIT=1g
